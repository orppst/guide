% This is the ADASS_template.tex LaTeX file, 19th Sep 2019.
% It is based on the ASP general author template file, but modified to reflect the specific
% requirements of the ADASS proceedings.
% Copyright 2014, Astronomical Society of the Pacific Conference Series
% Revision:  14 August 2014

% To compile, at the command line positioned at this folder, type:
% latex ADASS_template
% latex ADASS_template
% dvipdfm ADASS_template
% This will create a file called ADASS_template.pdf

\documentclass[11pt,twoside]{article}

% Do NOT use ANY packages other than asp2014. 
\usepackage{asp2014}

\aspSuppressVolSlug
\resetcounters

% References must all use BibTeX entries in a .bibfile.
% References must be cited in the text using \citet{} or \citep{}.
% Do not use \cite{}.
% See ManuscriptInstructions.pdf for more details
\bibliographystyle{asp2014}

% The ``markboth'' line sets up the running heads for the paper.
% 1 author: "Surname"
% 2 authors: "Surname1 and Surname2"
% 3 authors: "Surname1, Surname2, and Surname3"
% >3 authors: "Surname1 et al."
% Replace ``Short Title'' with the actual paper title, shortened if necessary.
% Use mixed case type for the shortened title
% Ensure shortened title does not cause an overfull hbox LaTeX error
% See ASPmanual2010.pdf 2.1.4  and ManuscriptInstructions.pdf for more details
\markboth{Walker et al}{Polaris: a new open source proposal tool}

\begin{document}

\title{Polaris: A New Open Source Proposal Tool}

% Note the position of the comma between the author name and the 
% affiliation number.
% Authors surnames should come after first names or initials, eg John Smith, or J. Smith.
% Author names should be separated by commas.
% The final author should be preceded by "and".
% Affiliations should not be repeated across multiple \affil commands. If several
% authors share an affiliation this should be in a single \affil which can then
% be referenced for several author names. If only one affiliation, no footnotes are needed.
% See ManuscriptInstructions.pdf and ASP's manual2010.pdf 3.1.4 for more details
\author{Darren~Walker,$^1$ Allan~England,$^1$ Ben~Green,$^1$ and Paul~Harrison,$^1$}
\affil{$^1$The University of Manchester, Manchester, Greater Manchester, UK; \email{darren.walker@manchester.ac.uk}}

% This section is for ADS Processing.  There must be one line per author. paperauthor has 9 arguments.
% Arguments are: {NAME}{EMAIL}{ORCID_ID_OR_BLANK}{INSTITUTION}{DEPARTMENT}{CITY}{PROVINCE}{POSTAL CODE}{COUNTRY}
\paperauthor{Darren~Walker}{darren.walker@manchester.ac.uk}{}{The University of Manchester}{Jodrell Bank Observatory}{Jodrell Bank}{Cheshire}{SK11 9DL}{UK}
\paperauthor{Allan~England}{allan.england@manchester.ac.uk}{}{The University of Manchester}{Jodrell Bank Observatory}{Jodrell Bank}{Cheshire}{SK11 9DL}{UK}
\paperauthor{Ben~Green}{benjamin.green@manchester.ac.uk}{}{The University of Manchester}{Jodrell Bank Observatory}{Jodrell Bank}{Cheshire}{SK11 9DL}{UK}
\paperauthor{Paul~Harrison}{paul.harrison@manchester.ac.uk}{}{The University of Manchester}{Jodrell Bank Observatory}{Jodrell Bank}{Cheshire}{SK11 9DL}{UK}

% There should be one \aindex line (commented out) for each author. These are used to
% build up the author index for the Proceedings. The surname must come first, followed by
% initials. Note the use of ~ before each initial to control spacing.
% The \author entries (see above) have surname last. These \aindex entries have
% surname first.
% The Aindex.py command willl create them for you after you have constructed the \author
% The first entry should be the first author, for bold-facing the author index page-reference

\aindex{Walker,~D.~J.}
\aindex{England,~A.}
\aindex{Green,~B.}
\aindex{Harrison,~P.~A.}


\begin{abstract}
    We are developing a new, open source proposal tool called \emph{Polaris} as a deliverable of the Horizon
    2020 OPTICON RadioNet Pilot project.
    This tool has been built on top of the Proposal Data Model, defined in the IVOA standard VO-DML\@.
    Although this is an important part of the tool, this paper will in particular focus on the technologies
    used build and develop Polaris itself.

    We strove to keep the code as lean as possible by utilising code generation and by using existing
    libraries and frameworks.
    The functionality of the tool is exposed as a RESTful API in a microservices architecture deployed
    on Kubernetes.
    We have developed a web-based GUI frontend to access our API. It has been written in Typescript
    using the React framework, specifically leveraging the Mantine library.
    We are also actively developing a CLI in Java to provide companion access to the API\@.

    The API, GUI and CLI are maintained in open-source repositories on GitHub.
    This allows others to contribute to the development of Polaris or fork the projects to change the tool
    to suit their needs.
\end{abstract}

% These lines show examples of subject index entries. At this stage these have to commented
% out, and need to be on separate lines. Eventually, they will be automatically uncommented
% and used to generate entries in the Subject Index at the end of the Proceedings volume.
% Don't leave these in! - replace them with ones relevant to your paper.
%\ssindex{FOOBAR!conference!ADASS 2024}
%\ssindex{FOOBAR!organisations!ASP}

% These lines show examples of ASCL index entries. At this stage these have to commented
% out, and need to be on separate lines. Eventually, they will be automatically uncommented
% and used to generate entries in the ASCL Index at the end of the Proceedings volume.
% The ascl.py command will scan your paper on possible code names.
% Don't leave these in! - replace them with ones relevant to your paper.
%\ooindex{FOOBAR, ascl:1101.010}


\section{Motivation}\label{sec:motivation}
\emph{North Star} is dead.\footnote{ technically ``end-of-life'', but that just doesn't have the same ... drama}
\emph{North Star} is the name of a current observation proposal tool used both by the radio and optical
astronomy communities.
It is no longer actively developed or maintained, it is outdated, and in need of replacement.

The Opticon RadioNet Pilot (ORP) aims to support and develop seamless access to radio and optical,
ground-based astronomy facilities across Europe and the rest of the world.
The ORP attempts to deliver on this aim by developing common standards for observation requests and
specifications,as well as a common framework for data access and processing.
As part of work-package JA2.1 of this pilot we are developing a new open source proposal tool that provides
a single access point for the community to create, edit, and submit observation requests to various astronomy
facilities.
The tool also strives to provide a uniform and useful interface for reviewing and allocating proposals by the
time-allocation-committees (TAC) at the relevant astronomy facilities.

To avoid the mistakes of the past we set out to develop a proposal tool with an open source philosophy, making
paramount the ideas of code readability, maintainability, extensibility and scalability.
We also hope that our efforts will produce a tool that has longevity.
To that end, our code base is currently version controlled in a private repository on
GitHub~\url{https://github.com/orppst}.
Our intention is to allow the user community to contribute to the projects, either directly by writing and
editing source code, via feedback in terms of bug-fixes and feature requests, or to fork the projects to
better tailor them to their own needs.

As a nod to the outgoing proposal tool, and perhaps signifying progress, we are calling this new proposal tool
\emph{Polaris}.\footnote{\emph{North Star++} felt a bit too ``on-the-nose''.}

We are aware of other such efforts to create observation proposal preparation tools.
Notably, the European Southern Observatory (ESO), and the Square Kilometer Array Observatory (SKAO) have
their own proposal preparation tools under development. [refs???]
Our tool is built on top of the International Virtual Observatory Alliance (IVOA) Virtual
Observatory Data Modelling Language (VO-DML).
As such, we are confident that \emph{Polaris} can export and import proposals to and from other tools using
VO-DML as their underpinning data modelling language with minimal manual intervention.


\section{Technologies}\label{sec:technologies}

In modern development of ``full stack'' applications, there is an extensive choice in how you set up your
architecture, the libraries and frameworks you can work with, and how it gets deployed on your systems.

In this section we discuss the technologies we choose to develop Polaris.

\subsection{Quarkus: a Kubernetes-native Java framework}\label{subsec:quarkus}

Quarkus \url{https://quarkus.io/} describes its self as a ``Supersonic Subatomic Java'', designed around a
``container-first'' philosophy to develop applications with low memory usage and fast startup times.
It is an open source project with a large community of developers and contributors.

%TODO: more reasons for using quarkus
Blah, blah, blah.

\subsection{OpenAPI: code generation}\label{subsec:openapi-code-generation}

%TODO: reasons for using this code generator
OpenApi-codegen \url{https://github.com/fabien0102/openapi-codegen}  - blah.

\subection{Mantine: a React components library}

Mantine\footnote{named after a Pok\'emon} \url{https://mantine.dev/} is a React components library that
provides many customisable components and hooks, based in TypeScript, to quickly and easily build accessible
frontend web applications.
It is an open source project that, at time of writing, is actively developed and maintained on GitHub.
Although there are several choices when it comes to choosing a TypeScript library to develop a frontend,
web based, GUI application (including not choosing one at all), we have found Mantine to be an intuitive,
comprehensive, well documented, and performant library to use.

%TODO: mention 'Vite' here?

\section{Architecture}\label{sec:architecture}

%TODO: eps figures of architecure/s

%TODO; flesh this out
The API is written in Java using RESTful architecture.
It interfaces with the PostgreSQL database via the Hibernate query language.
The database schemas are generated from the Proposal Data Model, written in VO-DML, and provides the
definitions of the Java classes and types we can work with in the implementation of the API\@.
We provide a separate ``document store'' volume to the database to house supporting documents pertinent
to the proposals.
Authorisation to the API is done using KeyCloak and an OIDC server.
You can sign-on to \emph{Polaris} using your orcid ID\@.


\section{Polaris}\label{sec:polaris}

\subsection{Use Cases}\label{subsec:use-cases}

\subsection{Proposal Editor}\label{subsec:proposal-editor}

%TODO: eps figures / screen shots of creating/editing a proposal

\subsection{Proposal Review and Allocation}\label{subsec:proposal-review-and-allocation}

%TODO: eps figures / screen shots of reviewing/allocating a proposal

\section{Future Developments}\label{sec:future-developments}
Features under development:
\begin{itemize}
    \item integration of specific Observatory capabilities
    \item spectral line lookup service (probably utilising Splatalogue \url{https://splatalogue.online/#/home})
    \item cone search and attributes search for observation targets (extending our SIMBAD search interface)
    \item specification of observation ``fields''
    \item user help guide to completing proposals
\end{itemize}
Please notice that this list is not exhaustive, not written in any particular order, and may very well be
out-of-date by the time this paper is published.\footnote{It certainly should be if we're doing our jobs
properly.}
An active list of ``Issues'' (bugs and feature requests) is maintained on the GitHub repository sites, which
are updated regularly as bugs are fixed and features added.


\section{Summary}\label{sec:summary}
In summary, we have created a full-stack, web-based, open source observation proposal tool, \emph{Polaris},
for use within both the radio and optical astronomy communities.
We have approached the design of the application with extensibility and longevity at the forefront of
our plans.
\emph{Polaris} will replace \emph{North Star} as the de facto observation proposal preparation tool for
the \emph{eMerlin} facility in the near future.

\acknowledgements This work is funded by the Horizon 2020 Opticon RadioNet Pilot

\bibliography{example}  % For BibTex

% if we have space left, we might add a conference photograph here. Leave commented for now.
% \bookpartphoto[width=1.0\textwidth]{foobar.eps}{FooBar Photo (Photo: Any Photographer)}

\end{document}
